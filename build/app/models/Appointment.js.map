{"version":3,"sources":["../../../src/app/models/Appointment.js"],"names":["Appointment","Model","init","sequelize","date","Sequelize","DATE","canceled_at","past","type","VIRTUAL","get","Date","cancelable","associate","models","belongsTo","User","foreignKey","as"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA,MAAMA,WAAN,SAA0BC,gBAA1B,CAAgC;AAC9B,SAAOC,IAAP,CAAYC,SAAZ,EAAuB;AACrB,UAAMD,IAAN,CACE;AACEE,MAAAA,IAAI,EAAEC,mBAAUC,IADlB;AAEEC,MAAAA,WAAW,EAAEF,mBAAUC,IAFzB;AAGEE,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAEJ,mBAAUK,OADZ;;AAEJC,QAAAA,GAAG,GAAG;AACJ,iBAAO,uBAAS,KAAKP,IAAd,EAAoB,IAAIQ,IAAJ,EAApB,CAAP;AACD;;AAJG,OAHR;AASEC,MAAAA,UAAU,EAAE;AACVJ,QAAAA,IAAI,EAAEJ,mBAAUK,OADN;;AAEVC,QAAAA,GAAG,GAAG;AACJ,iBAAO,uBAAS,IAAIC,IAAJ,EAAT,EAAqB,uBAAS,KAAKR,IAAd,EAAoB,CAApB,CAArB,CAAP;AACD;;AAJS;AATd,KADF,EAiBE;AACED,MAAAA;AADF,KAjBF;AAsBA,WAAO,IAAP;AACD;;AAED,SAAOW,SAAP,CAAiBC,MAAjB,EAAyB;AACvB,SAAKC,SAAL,CAAeD,MAAM,CAACE,IAAtB,EAA4B;AAAEC,MAAAA,UAAU,EAAE,SAAd;AAAyBC,MAAAA,EAAE,EAAE;AAA7B,KAA5B;AACA,SAAKH,SAAL,CAAeD,MAAM,CAACE,IAAtB,EAA4B;AAAEC,MAAAA,UAAU,EAAE,aAAd;AAA6BC,MAAAA,EAAE,EAAE;AAAjC,KAA5B;AACD;;AA9B6B;;eAiCjBnB,W","sourcesContent":["import Sequelize, { Model } from 'sequelize';\nimport { isBefore, subHours } from 'date-fns';\n\nclass Appointment extends Model {\n  static init(sequelize) {\n    super.init(\n      {\n        date: Sequelize.DATE,\n        canceled_at: Sequelize.DATE,\n        past: {\n          type: Sequelize.VIRTUAL,\n          get() {\n            return isBefore(this.date, new Date());\n          },\n        },\n        cancelable: {\n          type: Sequelize.VIRTUAL,\n          get() {\n            return isBefore(new Date(), subHours(this.date, 2));\n          },\n        },\n      },\n      {\n        sequelize,\n      }\n    );\n\n    return this;\n  }\n\n  static associate(models) {\n    this.belongsTo(models.User, { foreignKey: 'user_id', as: 'user' });\n    this.belongsTo(models.User, { foreignKey: 'provider_id', as: 'provider' });\n  }\n}\n\nexport default Appointment;\n"],"file":"Appointment.js"}