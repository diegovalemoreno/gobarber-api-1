{"version":3,"sources":["../../../src/app/jobs/CancellationMail.js"],"names":["CancellationMail","key","handle","data","appointment","Mail","sendMail","to","provider","name","email","subject","template","context","user","date","locale","pt"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,gBAAN,CAAuB;AACrB,MAAIC,GAAJ,GAAU;AACR,WAAO,kBAAP;AACD;;AAED,QAAMC,MAAN,CAAa;AAAEC,IAAAA;AAAF,GAAb,EAAuB;AACrB,UAAM;AAAEC,MAAAA;AAAF,QAAkBD,IAAxB;AAEA,UAAME,cAAKC,QAAL,CAAc;AAClBC,MAAAA,EAAE,EAAG,GAAEH,WAAW,CAACI,QAAZ,CAAqBC,IAAK,KAAIL,WAAW,CAACI,QAAZ,CAAqBE,KAAM,GAD9C;AAElBC,MAAAA,OAAO,EAAE,uBAFS;AAGlBC,MAAAA,QAAQ,EAAE,cAHQ;AAIlBC,MAAAA,OAAO,EAAE;AACPL,QAAAA,QAAQ,EAAEJ,WAAW,CAACI,QAAZ,CAAqBC,IADxB;AAEPK,QAAAA,IAAI,EAAEV,WAAW,CAACU,IAAZ,CAAiBL,IAFhB;AAGPM,QAAAA,IAAI,EAAE,qBACJ,uBAASX,WAAW,CAACW,IAArB,CADI,EAEJ,kCAFI,EAGJ;AACEC,UAAAA,MAAM,EAAEC;AADV,SAHI;AAHC;AAJS,KAAd,CAAN;AAgBD;;AAxBoB;;eA2BR,IAAIjB,gBAAJ,E","sourcesContent":["import { format, parseISO } from 'date-fns';\nimport pt from 'date-fns/locale/pt';\nimport Mail from '../../lib/Mail';\n\nclass CancellationMail {\n  get key() {\n    return 'CancellationMail';\n  }\n\n  async handle({ data }) {\n    const { appointment } = data;\n\n    await Mail.sendMail({\n      to: `${appointment.provider.name} <${appointment.provider.email}>`,\n      subject: 'Agendamento cancelado',\n      template: 'cancellation',\n      context: {\n        provider: appointment.provider.name,\n        user: appointment.user.name,\n        date: format(\n          parseISO(appointment.date),\n          \"'dia' dd 'de' MMMM', Ã s' H:mm'h'\",\n          {\n            locale: pt,\n          }\n        ),\n      },\n    });\n  }\n}\n\nexport default new CancellationMail();\n"],"file":"CancellationMail.js"}