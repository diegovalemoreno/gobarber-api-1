{"version":3,"sources":["../../src/lib/Mail.js"],"names":["Mail","constructor","host","port","secure","auth","mailConfig","transporter","nodemailer","createTransport","user","configureTemplates","viewPath","__dirname","use","viewEngine","exphbs","create","layoutsDir","partialsDir","defaultLayout","extname","extName","sendMail","message","default"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,IAAN,CAAW;AACTC,EAAAA,WAAW,GAAG;AACZ,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA,IAAR;AAAcC,MAAAA,MAAd;AAAsBC,MAAAA;AAAtB,QAA+BC,aAArC;AAEA,SAAKC,WAAL,GAAmBC,oBAAWC,eAAX,CAA2B;AAC5CP,MAAAA,IAD4C;AAE5CC,MAAAA,IAF4C;AAG5CC,MAAAA,MAH4C;AAI5CC,MAAAA,IAAI,EAAEA,IAAI,CAACK,IAAL,GAAYL,IAAZ,GAAmB;AAJmB,KAA3B,CAAnB;AAOA,SAAKM,kBAAL;AACD;;AAEDA,EAAAA,kBAAkB,GAAG;AACnB,UAAMC,QAAQ,GAAG,mBAAQC,SAAR,EAAmB,IAAnB,EAAyB,KAAzB,EAAgC,OAAhC,EAAyC,QAAzC,CAAjB;AAEA,SAAKN,WAAL,CAAiBO,GAAjB,CACE,SADF,EAEE,0CAAc;AACZC,MAAAA,UAAU,EAAEC,2BAAOC,MAAP,CAAc;AACxBC,QAAAA,UAAU,EAAE,mBAAQN,QAAR,EAAkB,SAAlB,CADY;AAExBO,QAAAA,WAAW,EAAE,mBAAQP,QAAR,EAAkB,UAAlB,CAFW;AAGxBQ,QAAAA,aAAa,EAAE,SAHS;AAIxBC,QAAAA,OAAO,EAAE;AAJe,OAAd,CADA;AAOZT,MAAAA,QAPY;AAQZU,MAAAA,OAAO,EAAE;AARG,KAAd,CAFF;AAaD;;AAEDC,EAAAA,QAAQ,CAACC,OAAD,EAAU;AAChB,WAAO,KAAKjB,WAAL,CAAiBgB,QAAjB,CAA0B,EAC/B,GAAGjB,cAAWmB,OADiB;AAE/B,SAAGD;AAF4B,KAA1B,CAAP;AAID;;AArCQ;;eAwCI,IAAIxB,IAAJ,E","sourcesContent":["import nodemailer from 'nodemailer';\nimport exphbs from 'express-handlebars';\nimport nodemailerhbs from 'nodemailer-express-handlebars';\nimport { resolve } from 'path';\nimport mailConfig from '../config/mail';\n\nclass Mail {\n  constructor() {\n    const { host, port, secure, auth } = mailConfig;\n\n    this.transporter = nodemailer.createTransport({\n      host,\n      port,\n      secure,\n      auth: auth.user ? auth : null,\n    });\n\n    this.configureTemplates();\n  }\n\n  configureTemplates() {\n    const viewPath = resolve(__dirname, '..', 'app', 'views', 'emails');\n\n    this.transporter.use(\n      'compile',\n      nodemailerhbs({\n        viewEngine: exphbs.create({\n          layoutsDir: resolve(viewPath, 'layouts'),\n          partialsDir: resolve(viewPath, 'partials'),\n          defaultLayout: 'default',\n          extname: '.hbs',\n        }),\n        viewPath,\n        extName: '.hbs',\n      })\n    );\n  }\n\n  sendMail(message) {\n    return this.transporter.sendMail({\n      ...mailConfig.default,\n      ...message,\n    });\n  }\n}\n\nexport default new Mail();\n"],"file":"Mail.js"}